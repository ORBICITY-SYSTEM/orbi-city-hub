import{aX as S,u as I,r as A,j as e,a6 as c,a1 as n,a5 as u,aj as b,aY as z,n as L,m as P,$ as o,a4 as B}from"./react-vendor-BIDRRw8F.js";import{t as m,C as l,B as g}from"./index-BLcOQO7i.js";import{B as j}from"./badge-BATP3r_Y.js";import{S as F,a as M,b as R,c as G,d as i}from"./select-ANAJPCoK.js";import"./trpc-vendor-wm-eNDph.js";import"./vendor-INCMKllo.js";const Q={bookings:"bg-blue-500/10 text-blue-600 border-blue-500/20",finance:"bg-green-500/10 text-green-600 border-green-500/20",marketing:"bg-purple-500/10 text-purple-600 border-purple-500/20",spam:"bg-red-500/10 text-red-600 border-red-500/20",important:"bg-yellow-500/10 text-yellow-600 border-yellow-500/20",general:"bg-gray-500/10 text-gray-600 border-gray-500/20"},T={positive:"text-green-600",neutral:"text-gray-600",negative:"text-red-600",urgent:"text-orange-600"};function q(){const[,E]=S("/email-inbox/:emailId"),[,p]=I(),r=E?.emailId,[D,v]=A.useState(null);if(!r)return e.jsx("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:58",className:"min-h-screen flex items-center justify-center",children:e.jsx("p",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:59",className:"text-gray-600",children:"Email not found"})});const{data:y,isLoading:N,refetch:f}=m.emailCategorization.getCategorizedEmails.useQuery({limit:1,offset:0}),{data:a,isLoading:w}=m.emailCategorization.getEmailSummary.useQuery({emailId:r}),h=m.emailCategorization.overrideCategory.useMutation({onSuccess:()=>{c.success("Category updated successfully"),f(),v(null)},onError:()=>{c.error("Failed to update category")}}),x=m.emailCategorization.summarizeEmail.useMutation({onSuccess:()=>{c.success("Summary generated successfully"),window.location.reload()},onError:()=>{c.error("Failed to generate summary")}}),s=y?.emails.find(t=>t.emailId===r);if(N)return e.jsx("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:102",className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50",children:e.jsx(n,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:103",className:"w-8 h-8 animate-spin text-blue-600"})});if(!s)return e.jsx("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:110",className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50",children:e.jsxs(l,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:111",className:"p-8 text-center",children:[e.jsx(u,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:112",className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:113",className:"text-xl font-semibold text-gray-900 mb-2",children:"Email Not Found"}),e.jsx("p",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:114",className:"text-gray-600 mb-4",children:"This email may have been deleted or moved."}),e.jsxs(g,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:115",onClick:()=>p("/email-inbox"),children:[e.jsx(b,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:116",className:"w-4 h-4 mr-2"}),"Back to Inbox"]})]})});const C=t=>{v(t),h.mutate({emailId:r,category:t})},k=()=>{x.mutate({emailId:r,subject:s.emailSubject||"",from:s.emailFrom||"",body:s.aiReasoning||""})};return e.jsx("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:141",className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-6",children:e.jsxs("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:142",className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:144",className:"flex items-center justify-between",children:[e.jsxs(g,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:145",variant:"outline",size:"sm",onClick:()=>p("/email-inbox"),children:[e.jsx(b,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:150",className:"w-4 h-4 mr-2"}),"Back to Inbox"]}),e.jsx(j,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:153",className:Q[s.category],children:s.category})]}),e.jsxs(l,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:159",className:"p-6 bg-white/80 backdrop-blur-sm border border-gray-200",children:[e.jsx("h1",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:160",className:"text-2xl font-bold text-gray-900 mb-4",children:s.emailSubject}),e.jsxs("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:164",className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:165",className:"flex items-center gap-2 text-gray-600",children:[e.jsx(z,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:166",className:"w-4 h-4"}),e.jsx("span",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:167",className:"text-sm truncate",children:s.emailFrom})]}),e.jsxs("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:169",className:"flex items-center gap-2 text-gray-600",children:[e.jsx(L,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:170",className:"w-4 h-4"}),e.jsx("span",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:171",className:"text-sm",children:s.emailDate?new Date(s.emailDate).toLocaleString():"Unknown"})]}),e.jsxs("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:175",className:"flex items-center gap-2 text-gray-600",children:[e.jsx(P,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:176",className:"w-4 h-4"}),e.jsxs("span",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:177",className:"text-sm",children:[s.confidence,"% confidence"]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:181",className:"flex items-center gap-4",children:[e.jsx("span",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:182",className:"text-sm text-gray-600",children:"Change category:"}),e.jsxs(F,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:183",value:D||s.category,onValueChange:t=>C(t),children:[e.jsx(M,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:187",className:"w-48",children:e.jsx(R,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:188"})}),e.jsxs(G,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:190",children:[e.jsx(i,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:191",value:"bookings",children:"Bookings"}),e.jsx(i,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:192",value:"finance",children:"Finance"}),e.jsx(i,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:193",value:"marketing",children:"Marketing"}),e.jsx(i,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:194",value:"spam",children:"Spam"}),e.jsx(i,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:195",value:"important",children:"Important"}),e.jsx(i,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:196",value:"general",children:"General"})]})]}),h.isPending&&e.jsx(n,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:200",className:"w-4 h-4 animate-spin text-blue-600"})]})]}),e.jsxs(l,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:206",className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200",children:[e.jsxs("h2",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:207",className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(o,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:208",className:"w-5 h-5 text-blue-600"}),"AI Categorization Reasoning"]}),e.jsx("p",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:211",className:"text-gray-700",children:s.aiReasoning})]}),w?e.jsx(l,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:216",className:"p-6 bg-white/80 backdrop-blur-sm border border-gray-200",children:e.jsx("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:217",className:"flex items-center justify-center py-8",children:e.jsx(n,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:218",className:"w-6 h-6 animate-spin text-blue-600"})})}):a?e.jsxs(l,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:222",className:"p-6 bg-white/80 backdrop-blur-sm border border-gray-200",children:[e.jsxs("h2",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:223",className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(o,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:224",className:"w-5 h-5 text-purple-600"}),"AI Summary"]}),e.jsxs("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:229",className:"mb-6",children:[e.jsx("h3",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:230",className:"text-sm font-semibold text-gray-700 mb-2",children:"Summary"}),e.jsx("p",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:231",className:"text-gray-900",children:a.shortSummary}),e.jsxs("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:232",className:"mt-2",children:[e.jsx(j,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:233",className:T[a.sentiment||"neutral"],children:a.sentiment||"neutral"}),e.jsxs("span",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:236",className:"text-xs text-gray-500 ml-2",children:[a.wordCount," words"]})]})]}),a.keyPoints&&Array.isArray(a.keyPoints)&&a.keyPoints.length>0&&e.jsxs("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:244",className:"mb-6",children:[e.jsx("h3",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:245",className:"text-sm font-semibold text-gray-700 mb-3",children:"Key Points"}),e.jsx("ul",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:246",className:"space-y-2",children:a.keyPoints.map((t,d)=>e.jsxs("li",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:248",className:"flex items-start gap-2",children:[e.jsx(B,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:249",className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:250",className:"text-gray-700",children:t})]},d))})]}),a.actionItems&&Array.isArray(a.actionItems)&&a.actionItems.length>0&&e.jsxs("div",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:259",children:[e.jsx("h3",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:260",className:"text-sm font-semibold text-gray-700 mb-3",children:"Action Items"}),e.jsx("ul",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:261",className:"space-y-2",children:a.actionItems.map((t,d)=>e.jsxs("li",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:263",className:"flex items-start gap-2",children:[e.jsx(u,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:264",className:"w-4 h-4 text-orange-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:265",className:"text-gray-700",children:t})]},d))})]})]}):e.jsxs(l,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:273",className:"p-6 bg-white/80 backdrop-blur-sm border border-gray-200 text-center",children:[e.jsx(o,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:274",className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:275",className:"text-lg font-semibold text-gray-900 mb-2",children:"No Summary Available"}),e.jsx("p",{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:276",className:"text-gray-600 mb-4",children:"Generate an AI summary to see key points and action items."}),e.jsxs(g,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:279",onClick:k,disabled:x.isPending,children:[x.isPending?e.jsx(n,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:284",className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(o,{"data-loc":"client/src/pages/reservations/EmailDetail.tsx:286",className:"w-4 h-4 mr-2"}),"Generate Summary"]})]})]})})}export{q as default};
