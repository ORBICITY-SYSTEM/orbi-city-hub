import{j as e,bC as y,at as ye,bD as Ne,bE as we,bF as be,bG as Se,r as f,bH as Ce,aV as T,a$ as _e,af as V,b0 as w,a6 as k,aw as De,ah as X,n as Ee,bI as Re,a3 as W,X as ze}from"./react-vendor-BIDRRw8F.js";import{j as H,B as m,C as J,a as Y,T as E,b as Te,c as Ue,D as Z,f as ee,g as se,h as te}from"./index-BLcOQO7i.js";import{I as oe}from"./input-BuEOZAZD.js";import{L as R}from"./label-KexGf_ya.js";import{B as C}from"./badge-BATP3r_Y.js";import{u as ie}from"./LanguageContext-DvTuhYl4.js";import{s as p}from"./client-C3pdvDkS.js";import{T as ne,a as ce,b as S,c as x,d as ae,e as g}from"./table-CASaqgev.js";import{S as Pe}from"./scroll-area-C9ECY_El.js";import{X as z}from"./vendor-INCMKllo.js";function qe({className:o,...c}){return e.jsx(y,{"data-loc":"client/src/components/ui/command.tsx:21","data-slot":"command",className:H("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",o),...c})}function Fe({className:o,...c}){return e.jsxs("div",{"data-loc":"client/src/components/ui/command.tsx:68","data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[e.jsx(ye,{"data-loc":"client/src/components/ui/command.tsx:72",className:"size-4 shrink-0 opacity-50"}),e.jsx(y.Input,{"data-loc":"client/src/components/ui/command.tsx:73","data-slot":"command-input",className:H("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",o),...c})]})}function $e({className:o,...c}){return e.jsx(y.List,{"data-loc":"client/src/components/ui/command.tsx:90","data-slot":"command-list",className:H("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",o),...c})}function Ae({...o}){return e.jsx(y.Empty,{"data-loc":"client/src/components/ui/command.tsx:105","data-slot":"command-empty",className:"py-6 text-center text-sm",...o})}function Ke({className:o,...c}){return e.jsx(y.Group,{"data-loc":"client/src/components/ui/command.tsx:118","data-slot":"command-group",className:H("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",o),...c})}function Qe({className:o,...c}){return e.jsx(y.Item,{"data-loc":"client/src/components/ui/command.tsx:147","data-slot":"command-item",className:H("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",o),...c})}function Le({...o}){return e.jsx(Ne,{"data-loc":"client/src/components/ui/popover.tsx:9","data-slot":"popover",...o})}function Oe({...o}){return e.jsx(we,{"data-loc":"client/src/components/ui/popover.tsx:15","data-slot":"popover-trigger",...o})}function Be({className:o,align:c="center",sideOffset:h=4,...l}){return e.jsx(be,{"data-loc":"client/src/components/ui/popover.tsx:25",children:e.jsx(Se,{"data-loc":"client/src/components/ui/popover.tsx:26","data-slot":"popover-content",align:c,sideOffset:h,className:H("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",o),...l})})}const le=({availableRooms:o,selectedRooms:c,onChange:h})=>{const{t:l}=ie(),[N,d]=f.useState(!1),M=u=>{c.includes(u)?h(c.filter(v=>v!==u)):h([...c,u])};return e.jsxs("div",{"data-loc":"client/src/components/RoomMultiSelect.tsx:48",className:"space-y-2",children:[c.length>0?e.jsx("div",{"data-loc":"client/src/components/RoomMultiSelect.tsx:50",className:"flex flex-wrap gap-1.5 p-2 border rounded-md bg-muted/30 min-h-10",children:c.map(u=>e.jsx(C,{"data-loc":"client/src/components/RoomMultiSelect.tsx:52",variant:"secondary",className:"text-sm",children:u},u))}):null,e.jsxs(Le,{"data-loc":"client/src/components/RoomMultiSelect.tsx:63",open:N,onOpenChange:d,children:[e.jsx(Oe,{"data-loc":"client/src/components/RoomMultiSelect.tsx:64",asChild:!0,children:e.jsxs(m,{"data-loc":"client/src/components/RoomMultiSelect.tsx:65",variant:"outline",size:"sm",className:"w-full",children:[e.jsx(Ce,{"data-loc":"client/src/components/RoomMultiSelect.tsx:70",className:"mr-2 h-4 w-4"}),c.length===0?l("აირჩიეთ ნომრები","Select rooms"):l("ცვლილება","Edit selection")]})}),e.jsxs(Be,{"data-loc":"client/src/components/RoomMultiSelect.tsx:76",className:"w-full p-0 z-50 bg-popover",align:"start",children:[e.jsxs(qe,{"data-loc":"client/src/components/RoomMultiSelect.tsx:77",children:[e.jsx(Fe,{"data-loc":"client/src/components/RoomMultiSelect.tsx:78",placeholder:l("ძიება...","Search...")}),e.jsxs($e,{"data-loc":"client/src/components/RoomMultiSelect.tsx:79",children:[e.jsx(Ae,{"data-loc":"client/src/components/RoomMultiSelect.tsx:80",children:l("ნომერი არ მოიძებნა","No room found")}),e.jsx(Ke,{"data-loc":"client/src/components/RoomMultiSelect.tsx:81",children:o.map(u=>e.jsxs(Qe,{"data-loc":"client/src/components/RoomMultiSelect.tsx:83",value:u,onSelect:()=>{M(u)},children:[e.jsx(T,{"data-loc":"client/src/components/RoomMultiSelect.tsx:90",className:H("mr-2 h-4 w-4",c.includes(u)?"opacity-100":"opacity-0")}),u]},u))})]})]}),e.jsx("div",{"data-loc":"client/src/components/RoomMultiSelect.tsx:102",className:"border-t p-2",children:e.jsxs(m,{"data-loc":"client/src/components/RoomMultiSelect.tsx:103",onClick:()=>d(!1),className:"w-full",size:"sm",children:[l("არჩევის დასრულება","Done")," (",c.length,")"]})})]})]}),c.length>0&&e.jsxs("div",{"data-loc":"client/src/components/RoomMultiSelect.tsx:114",className:"text-sm text-muted-foreground",children:[l("არჩეული:","Selected:")," ",c.length," ",l("ნომერი","rooms")]})]})};function Ie(){return{logActivity:async(c,h,l)=>{console.log("Logistics activity:",{activityType:c,description:h,roomNumber:l})}}}const cs=()=>{const{t:o}=ie(),c=_e(),{logActivity:h}=Ie(),[l,N]=f.useState([]),[d,M]=f.useState(null),[u,v]=f.useState(!1),[de,U]=f.useState(!1),[i,P]=f.useState(null),[q,F]=f.useState(null),$=f.useRef(null),{data:A}=V({queryKey:["available-rooms"],queryFn:async()=>{const{data:s,error:t}=await p.from("rooms").select("room_number").order("room_number");if(t)throw t;return s.map(n=>n.room_number)}}),{data:j,isLoading:re}=V({queryKey:["housekeeping-schedules"],queryFn:async()=>{const{data:s,error:t}=await p.from("housekeeping_schedules").select("*").order("scheduled_date",{ascending:!1});if(t)throw t;return s}}),K=w({mutationFn:async s=>{const{data:{user:t}}=await p.auth.getUser();if(!t)throw new Error("Not authenticated");const{data:n,error:a}=await p.from("housekeeping_schedules").insert({user_id:t.id,scheduled_date:s.date,rooms:s.rooms,total_rooms:s.rooms.length,notes:s.notes.trim()||null,status:"pending"}).select().single();if(a)throw a;return n},onSuccess:async(s,t)=>{await h({action:"create",entityType:"housekeeping_schedule",entityId:s.id,entityName:`${t.rooms.length} rooms - ${t.date}`,changes:{rooms:t.rooms,notes:t.notes}}),c.invalidateQueries({queryKey:["housekeeping-schedules"]}),c.invalidateQueries({queryKey:["logistics-activity-log"]}),k.success(o("ჩანაწერი დაემატა","Entry added"))},onError:()=>{k.error(o("შეცდომა დამატებისას","Error adding entry"))}}),ue=w({mutationFn:async({id:s,status:t})=>{const n={status:t};t==="completed"&&(n.completed_at=new Date().toISOString());const{error:a}=await p.from("housekeeping_schedules").update(n).eq("id",s);if(a)throw a},onSuccess:async(s,{id:t,status:n})=>{const a=j?.find(r=>r.id===t);await h({action:"update",entityType:"housekeeping_schedule",entityId:t,entityName:a?`${a.rooms.length} rooms`:void 0,changes:{status:n,previous_status:a?.status}}),c.invalidateQueries({queryKey:["housekeeping-schedules"]}),c.invalidateQueries({queryKey:["logistics-activity-log"]}),k.success(o("სტატუსი განახლდა","Status updated"))}}),me=w({mutationFn:async s=>{const{error:t}=await p.from("housekeeping_schedules").delete().eq("id",s);if(t)throw t},onSuccess:async(s,t)=>{const n=j?.find(a=>a.id===t);await h({action:"delete",entityType:"housekeeping_schedule",entityId:t,entityName:n?`${n.rooms.length} rooms - ${n.scheduled_date}`:void 0}),c.invalidateQueries({queryKey:["housekeeping-schedules"]}),c.invalidateQueries({queryKey:["logistics-activity-log"]}),k.success(o("ჩანაწერი წაიშალა","Entry deleted"))}}),Q=w({mutationFn:async({id:s,data:t})=>{const{error:n}=await p.from("housekeeping_schedules").update({scheduled_date:t.date,rooms:t.rooms,total_rooms:t.rooms.length,notes:t.notes||null}).eq("id",s);if(n)throw n},onSuccess:()=>{c.invalidateQueries({queryKey:["housekeeping-schedules"]}),v(!1),M(null),k.success(o("ჩანაწერი განახლდა","Entry updated"))}}),_=w({mutationFn:async({id:s,mediaUrls:t,additionalNotes:n})=>{const a={media_urls:t};n!==void 0&&(a.additional_notes=n);const{error:r}=await p.from("housekeeping_schedules").update(a).eq("id",s);if(r)throw r},onSuccess:()=>{c.invalidateQueries({queryKey:["housekeeping-schedules"]}),k.success(o("განახლდა","Updated"))}}),pe=()=>{N([...l,{date:z(new Date,"yyyy-MM-dd"),rooms:[],notes:""}])},L=s=>{N(l.filter((t,n)=>n!==s))},D=(s,t,n)=>{const a=[...l];a[s][t]=n,N(a)},xe=s=>{const t=l[s];if(!t.date||t.rooms.length===0){k.error(o("შეავსეთ თარიღი და ნომრები","Fill date and rooms"));return}K.mutate(t),L(s)},O=s=>s==="completed"?e.jsx(C,{"data-loc":"client/src/components/HousekeepingModule.tsx:222",variant:"default",children:o("დასრულებული","Completed")}):e.jsx(C,{"data-loc":"client/src/components/HousekeepingModule.tsx:224",variant:"outline",children:o("მოლოდინში","Pending")}),ge=s=>{M({id:s.id,date:s.scheduled_date,rooms:s.rooms,notes:s.notes||""}),v(!0)},he=()=>{d&&Q.mutate({id:d.id,data:{date:d.date,rooms:d.rooms,notes:d.notes}})},B=async(s,t)=>{if(!t.length)return;F(s);const{data:{user:n}}=await p.auth.getUser();if(n)try{const a=Array.from(t).map(async b=>{const He=b.name.split(".").pop(),I=`${n.id}/${s}/${Date.now()}.${He}`,{error:G,data:Ve}=await p.storage.from("housekeeping-media").upload(I,b);if(G)throw G;const{data:{publicUrl:ve}}=p.storage.from("housekeeping-media").getPublicUrl(I);return ve}),r=await Promise.all(a),Me=j?.find(b=>b.id===s)?.media_urls||[];await _.mutateAsync({id:s,mediaUrls:[...Me,...r]}),k.success(o("ფაილები აიტვირთა","Files uploaded"))}catch(a){console.error("Upload error:",a),k.error(o("შეცდომა ატვირთვისას","Upload error"))}finally{F(null)}},ke=s=>{P(s),U(!0)},je=async(s,t)=>{const n=j?.find(r=>r.id===s);if(!n)return;const a=n.media_urls.filter(r=>r!==t);try{await _.mutateAsync({id:s,mediaUrls:a});const r=t.split("/housekeeping-media/")[1];r&&await p.storage.from("housekeeping-media").remove([r])}catch(r){console.error("Delete error:",r)}},fe=async(s,t)=>{try{const n=j?.find(a=>a.id===s);await _.mutateAsync({id:s,mediaUrls:n?.media_urls||[],additionalNotes:t})}catch(n){console.error("Update notes error:",n)}};return e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:335",className:"space-y-6",children:[e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:336",className:"flex items-center justify-between mb-6",children:[e.jsx("p",{"data-loc":"client/src/components/HousekeepingModule.tsx:337",className:"text-muted-foreground",children:o("დააჭირეთ + ღილაკს ახალი ჩანაწერის დასამატებლად","Click + button to add new entry")}),e.jsxs(m,{"data-loc":"client/src/components/HousekeepingModule.tsx:340",onClick:pe,size:"sm",children:[e.jsx(De,{"data-loc":"client/src/components/HousekeepingModule.tsx:341",className:"h-4 w-4 mr-2"}),o("ახალი ჩანაწერი","New Entry")]})]}),l.length>0&&e.jsx(J,{"data-loc":"client/src/components/HousekeepingModule.tsx:347",children:e.jsx(Y,{"data-loc":"client/src/components/HousekeepingModule.tsx:348",className:"pt-6",children:e.jsxs(ne,{"data-loc":"client/src/components/HousekeepingModule.tsx:349",children:[e.jsx(ce,{"data-loc":"client/src/components/HousekeepingModule.tsx:350",children:e.jsxs(S,{"data-loc":"client/src/components/HousekeepingModule.tsx:351",children:[e.jsx(x,{"data-loc":"client/src/components/HousekeepingModule.tsx:352",className:"w-[180px]",children:o("თარიღი","Date")}),e.jsx(x,{"data-loc":"client/src/components/HousekeepingModule.tsx:353",children:o("დასალაგებელი ნომრები","Rooms to Clean")}),e.jsx(x,{"data-loc":"client/src/components/HousekeepingModule.tsx:354",className:"w-[100px]",children:o("სულ","Total")}),e.jsx(x,{"data-loc":"client/src/components/HousekeepingModule.tsx:355",children:o("შენიშვნები","Notes")}),e.jsx(x,{"data-loc":"client/src/components/HousekeepingModule.tsx:356",className:"w-[100px]"})]})}),e.jsx(ae,{"data-loc":"client/src/components/HousekeepingModule.tsx:359",children:l.map((s,t)=>e.jsxs(S,{"data-loc":"client/src/components/HousekeepingModule.tsx:362",children:[e.jsx(g,{"data-loc":"client/src/components/HousekeepingModule.tsx:363",children:e.jsx(oe,{"data-loc":"client/src/components/HousekeepingModule.tsx:364",type:"date",value:s.date,onChange:n=>D(t,"date",n.target.value),className:"w-full"})}),e.jsx(g,{"data-loc":"client/src/components/HousekeepingModule.tsx:371",children:e.jsx(le,{"data-loc":"client/src/components/HousekeepingModule.tsx:372",availableRooms:A||[],selectedRooms:s.rooms,onChange:n=>D(t,"rooms",n)})}),e.jsx(g,{"data-loc":"client/src/components/HousekeepingModule.tsx:378",className:"text-center font-semibold",children:s.rooms.length>0?s.rooms.length:"-"}),e.jsx(g,{"data-loc":"client/src/components/HousekeepingModule.tsx:381",children:e.jsx(E,{"data-loc":"client/src/components/HousekeepingModule.tsx:382",value:s.notes,onChange:n=>D(t,"notes",n.target.value),placeholder:o("შენიშვნები...","Notes..."),rows:1,className:"resize-none"})}),e.jsx(g,{"data-loc":"client/src/components/HousekeepingModule.tsx:390",children:e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:391",className:"flex gap-2",children:[e.jsx(m,{"data-loc":"client/src/components/HousekeepingModule.tsx:392",onClick:()=>xe(t),size:"sm",variant:"default",disabled:K.isPending,children:e.jsx(T,{"data-loc":"client/src/components/HousekeepingModule.tsx:398",className:"h-4 w-4"})}),e.jsx(m,{"data-loc":"client/src/components/HousekeepingModule.tsx:400",onClick:()=>L(t),size:"sm",variant:"ghost",children:e.jsx(X,{"data-loc":"client/src/components/HousekeepingModule.tsx:405",className:"h-4 w-4"})})]})})]},t))})]})})}),e.jsxs(J,{"data-loc":"client/src/components/HousekeepingModule.tsx:418",children:[e.jsx(Te,{"data-loc":"client/src/components/HousekeepingModule.tsx:419",children:e.jsx(Ue,{"data-loc":"client/src/components/HousekeepingModule.tsx:420"})}),e.jsx(Y,{"data-loc":"client/src/components/HousekeepingModule.tsx:422",children:re?e.jsx("p",{"data-loc":"client/src/components/HousekeepingModule.tsx:424",className:"text-muted-foreground text-center py-4",children:o("იტვირთება...","Loading...")}):j&&j.length>0?e.jsxs(ne,{"data-loc":"client/src/components/HousekeepingModule.tsx:428",children:[e.jsx(ce,{"data-loc":"client/src/components/HousekeepingModule.tsx:429",children:e.jsxs(S,{"data-loc":"client/src/components/HousekeepingModule.tsx:430",children:[e.jsx(x,{"data-loc":"client/src/components/HousekeepingModule.tsx:431",children:o("თარიღი","Date")}),e.jsx(x,{"data-loc":"client/src/components/HousekeepingModule.tsx:432",children:o("ნომრები","Rooms")}),e.jsx(x,{"data-loc":"client/src/components/HousekeepingModule.tsx:433",className:"w-[100px]",children:o("სულ","Total")}),e.jsx(x,{"data-loc":"client/src/components/HousekeepingModule.tsx:434",children:o("შენიშვნები","Notes")}),e.jsx(x,{"data-loc":"client/src/components/HousekeepingModule.tsx:435",className:"w-[120px]",children:o("სტატუსი","Status")}),e.jsx(x,{"data-loc":"client/src/components/HousekeepingModule.tsx:436",className:"w-[100px]"})]})}),e.jsx(ae,{"data-loc":"client/src/components/HousekeepingModule.tsx:439",children:j.map(s=>e.jsxs(S,{"data-loc":"client/src/components/HousekeepingModule.tsx:441",children:[e.jsx(g,{"data-loc":"client/src/components/HousekeepingModule.tsx:442",className:"font-medium",children:e.jsxs("button",{"data-loc":"client/src/components/HousekeepingModule.tsx:443",onClick:()=>ke(s),className:"flex items-center gap-2 text-primary hover:underline",children:[e.jsx(Ee,{"data-loc":"client/src/components/HousekeepingModule.tsx:447",className:"h-4 w-4"}),z(new Date(s.scheduled_date),"PP")]})}),e.jsx(g,{"data-loc":"client/src/components/HousekeepingModule.tsx:451",children:e.jsx("span",{"data-loc":"client/src/components/HousekeepingModule.tsx:452",className:"text-sm",children:s.rooms.join(", ")})}),e.jsx(g,{"data-loc":"client/src/components/HousekeepingModule.tsx:454",className:"text-center font-semibold",children:s.total_rooms}),e.jsx(g,{"data-loc":"client/src/components/HousekeepingModule.tsx:457",children:e.jsx("span",{"data-loc":"client/src/components/HousekeepingModule.tsx:458",className:"text-sm text-muted-foreground",children:s.notes||"-"})}),e.jsx(g,{"data-loc":"client/src/components/HousekeepingModule.tsx:462",children:O(s.status)}),e.jsx(g,{"data-loc":"client/src/components/HousekeepingModule.tsx:465",children:e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:466",className:"flex gap-2",children:[e.jsx(m,{"data-loc":"client/src/components/HousekeepingModule.tsx:467",onClick:()=>ge(s),size:"sm",variant:"outline",children:e.jsx(Re,{"data-loc":"client/src/components/HousekeepingModule.tsx:472",className:"h-4 w-4"})}),e.jsx(m,{"data-loc":"client/src/components/HousekeepingModule.tsx:474",onClick:()=>$.current?.click(),size:"sm",variant:"outline",disabled:q===s.id,children:e.jsx(W,{"data-loc":"client/src/components/HousekeepingModule.tsx:480",className:"h-4 w-4"})}),e.jsx("input",{"data-loc":"client/src/components/HousekeepingModule.tsx:482",ref:$,type:"file",multiple:!0,accept:"image/*,video/*",className:"hidden",onChange:t=>{t.target.files&&B(s.id,t.target.files)}}),s.status!=="completed"&&e.jsx(m,{"data-loc":"client/src/components/HousekeepingModule.tsx:495",onClick:()=>ue.mutate({id:s.id,status:"completed"}),size:"sm",variant:"outline",children:e.jsx(T,{"data-loc":"client/src/components/HousekeepingModule.tsx:500",className:"h-4 w-4"})}),e.jsx(m,{"data-loc":"client/src/components/HousekeepingModule.tsx:503",onClick:()=>me.mutate(s.id),size:"sm",variant:"ghost",children:e.jsx(X,{"data-loc":"client/src/components/HousekeepingModule.tsx:508",className:"h-4 w-4"})})]})})]},s.id))})]}):e.jsx("p",{"data-loc":"client/src/components/HousekeepingModule.tsx:517",className:"text-muted-foreground text-center py-8",children:o("ჩანაწერები არ არის","No entries yet")})})]}),e.jsx(Z,{"data-loc":"client/src/components/HousekeepingModule.tsx:524",open:u,onOpenChange:v,children:e.jsxs(ee,{"data-loc":"client/src/components/HousekeepingModule.tsx:525",className:"max-w-2xl",children:[e.jsx(se,{"data-loc":"client/src/components/HousekeepingModule.tsx:526",children:e.jsx(te,{"data-loc":"client/src/components/HousekeepingModule.tsx:527",children:o("ჩანაწერის რედაქტირება","Edit Entry")})}),d&&e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:530",className:"space-y-4 py-4",children:[e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:531",className:"space-y-2",children:[e.jsx(R,{"data-loc":"client/src/components/HousekeepingModule.tsx:532",children:o("თარიღი","Date")}),e.jsx(oe,{"data-loc":"client/src/components/HousekeepingModule.tsx:533",type:"date",value:d.date,onChange:s=>M({...d,date:s.target.value})})]}),e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:539",className:"space-y-2",children:[e.jsx(R,{"data-loc":"client/src/components/HousekeepingModule.tsx:540",children:o("ნომრები","Rooms")}),e.jsx(le,{"data-loc":"client/src/components/HousekeepingModule.tsx:541",availableRooms:A||[],selectedRooms:d.rooms,onChange:s=>M({...d,rooms:s})})]}),e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:547",className:"space-y-2",children:[e.jsx(R,{"data-loc":"client/src/components/HousekeepingModule.tsx:548",children:o("შენიშვნები","Notes")}),e.jsx(E,{"data-loc":"client/src/components/HousekeepingModule.tsx:549",value:d.notes,onChange:s=>M({...d,notes:s.target.value}),rows:3})]}),e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:555",className:"flex gap-2 justify-end",children:[e.jsx(m,{"data-loc":"client/src/components/HousekeepingModule.tsx:556",variant:"outline",onClick:()=>v(!1),children:o("გაუქმება","Cancel")}),e.jsx(m,{"data-loc":"client/src/components/HousekeepingModule.tsx:559",onClick:he,disabled:Q.isPending,children:o("შენახვა","Save")})]})]})]})}),e.jsx(Z,{"data-loc":"client/src/components/HousekeepingModule.tsx:568",open:de,onOpenChange:U,children:e.jsxs(ee,{"data-loc":"client/src/components/HousekeepingModule.tsx:569",className:"max-w-4xl max-h-[90vh]",children:[e.jsx(se,{"data-loc":"client/src/components/HousekeepingModule.tsx:570",children:e.jsxs(te,{"data-loc":"client/src/components/HousekeepingModule.tsx:571",children:[i&&z(new Date(i.scheduled_date),"PP")," - ",o("დეტალური ინფორმაცია","Details")]})}),i&&e.jsx(Pe,{"data-loc":"client/src/components/HousekeepingModule.tsx:576",className:"max-h-[70vh] pr-4",children:e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:577",className:"space-y-6 py-4",children:[e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:578",children:[e.jsx("h3",{"data-loc":"client/src/components/HousekeepingModule.tsx:579",className:"font-semibold mb-2",children:o("ნომრები","Rooms")}),e.jsx("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:580",className:"flex flex-wrap gap-2",children:i.rooms.map(s=>e.jsx(C,{"data-loc":"client/src/components/HousekeepingModule.tsx:582",variant:"outline",children:s},s))})]}),i.notes&&e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:588",children:[e.jsx("h3",{"data-loc":"client/src/components/HousekeepingModule.tsx:589",className:"font-semibold mb-2",children:o("შენიშვნები","Notes")}),e.jsx("p",{"data-loc":"client/src/components/HousekeepingModule.tsx:590",className:"text-sm text-muted-foreground",children:i.notes})]}),e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:594",children:[e.jsx("h3",{"data-loc":"client/src/components/HousekeepingModule.tsx:595",className:"font-semibold mb-2",children:o("დამატებითი კომენტარები","Additional Comments")}),e.jsx(E,{"data-loc":"client/src/components/HousekeepingModule.tsx:596",value:i.additional_notes||"",onChange:s=>{P({...i,additional_notes:s.target.value})},onBlur:s=>fe(i.id,s.target.value),placeholder:o("დაწერეთ კომენტარები...","Write comments..."),rows:4})]}),e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:607",children:[e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:608",className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{"data-loc":"client/src/components/HousekeepingModule.tsx:609",className:"font-semibold",children:o("სურათები და ვიდეოები","Photos & Videos")}),e.jsxs(m,{"data-loc":"client/src/components/HousekeepingModule.tsx:610",size:"sm",onClick:()=>{const s=document.createElement("input");s.type="file",s.multiple=!0,s.accept="image/*,video/*",s.onchange=t=>{t.target.files&&B(i.id,t.target.files)},s.click()},disabled:q===i.id,children:[e.jsx(W,{"data-loc":"client/src/components/HousekeepingModule.tsx:626",className:"h-4 w-4 mr-2"}),o("ატვირთვა","Upload")]})]}),i.media_urls&&i.media_urls.length>0?e.jsx("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:632",className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:i.media_urls.map((s,t)=>e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:634",className:"relative group",children:[s.match(/\.(mp4|webm|ogg)$/i)?e.jsx("video",{"data-loc":"client/src/components/HousekeepingModule.tsx:636",src:s,controls:!0,className:"w-full h-48 object-cover rounded-lg"}):e.jsx("img",{"data-loc":"client/src/components/HousekeepingModule.tsx:642",src:s,alt:`Media ${t+1}`,className:"w-full h-48 object-cover rounded-lg"}),e.jsx(m,{"data-loc":"client/src/components/HousekeepingModule.tsx:648",size:"icon",variant:"destructive",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>je(i.id,s),children:e.jsx(ze,{"data-loc":"client/src/components/HousekeepingModule.tsx:654",className:"h-4 w-4"})})]},t))}):e.jsx("p",{"data-loc":"client/src/components/HousekeepingModule.tsx:660",className:"text-sm text-muted-foreground text-center py-8",children:o("ფაილები ჯერ არ არის ატვირთული","No files uploaded yet")})]}),e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:666",className:"flex items-center gap-4 pt-4 border-t",children:[e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:667",children:[e.jsxs("span",{"data-loc":"client/src/components/HousekeepingModule.tsx:668",className:"text-sm text-muted-foreground",children:[o("სტატუსი","Status"),":"]})," ",O(i.status)]}),e.jsxs("div",{"data-loc":"client/src/components/HousekeepingModule.tsx:672",children:[e.jsxs("span",{"data-loc":"client/src/components/HousekeepingModule.tsx:673",className:"text-sm text-muted-foreground",children:[o("სულ ნომრები","Total Rooms"),":"]})," ",e.jsx("span",{"data-loc":"client/src/components/HousekeepingModule.tsx:675",className:"font-semibold",children:i.total_rooms})]})]})]})})]})})]})};export{cs as H,Le as P,Oe as a,Be as b,Ie as u};
