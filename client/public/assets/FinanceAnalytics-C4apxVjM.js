import{r as d,j as e,al as P,l as k,i as E,k as C}from"./react-vendor-BIDRRw8F.js";import{t as j,C as m}from"./index-BLcOQO7i.js";import{I as N}from"./input-BuEOZAZD.js";import{L as b}from"./label-KexGf_ya.js";import{S as I,a as L,b as D,c as O,d as w}from"./select-ANAJPCoK.js";import"./trpc-vendor-wm-eNDph.js";import"./vendor-INCMKllo.js";function z(){const{data:l}=j.realFinance.getSummary.useQuery(),{data:c}=j.realFinance.getMonthlyData.useQuery(),[x,R]=d.useState(0),[y,M]=d.useState(0),[p,S]=d.useState("all"),u=d.useMemo(()=>{if(x===0)return{roi:0,profit:0};const a=y-x;return{roi:a/x*100,profit:a}},[x,y]),g=d.useMemo(()=>{if(!c)return null;let a=c;p!=="all"&&(a=c.filter(s=>s.month===p));const r=a.reduce((s,n)=>s+n.totalRevenue,0),t=a.reduce((s,n)=>s+n.daysAvailable,0),v=a.reduce((s,n)=>s+n.daysOccupied,0),h=t>0?v/t*100:0,f=t>0?r/t:0,F=a.reduce((s,n)=>s+n.avgPrice,0)/a.length;return{revpar:Math.round(f),occupancy:h.toFixed(1),adr:Math.round(F),totalRevenue:r,daysAvailable:t}},[c,p]),o=d.useMemo(()=>{if(!c||c.length<3)return null;const a=c.map(n=>n.totalRevenue),r=a.length,t=a.reduce((n,A)=>n+A,0)/r,h=a.slice(-3).reduce((n,A)=>n+A,0)/3,f=(h-t)/t*100,s=a[a.length-1]*(1+f/100);return{currentAvg:Math.round(t),last3MonthsAvg:Math.round(h),growthRate:f.toFixed(1),forecastNext:Math.round(s)}},[c]),i=d.useMemo(()=>{if(!l)return null;const a=l.netProfit/l.totalRevenue*100,r=l.totalExpenses/l.totalRevenue*100,t=l.totalExpenses;return{grossMargin:a.toFixed(1),expenseRatio:r.toFixed(1),breakEven:Math.round(t)}},[l]);return e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:104",className:"min-h-screen bg-gradient-to-br from-[oklch(0.12_0.10_240)] to-[oklch(0.18_0.10_240)] p-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:106",className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white p-8 rounded-lg mb-6 shadow-xl",children:[e.jsx("h1",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:107",className:"text-4xl font-bold mb-2",children:"ðŸ“Š Finance Analytics"}),e.jsx("p",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:108",className:"text-white/90 font-bold",children:"ROI Calculator â€¢ RevPAR Analysis â€¢ Forecasting â€¢ Profitability Metrics"})]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:113",className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs(m,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:115",className:"p-6 bg-white/10 backdrop-blur-md border-white/20",children:[e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:116",className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:117",className:"bg-green-500/20 p-3 rounded-lg",children:e.jsx(P,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:118",className:"w-6 h-6 text-green-300"})}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:120",children:[e.jsx("h2",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:121",className:"text-xl font-bold text-white",children:"ROI Calculator"}),e.jsx("p",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:122",className:"text-sm text-white/70",children:"Calculate Return on Investment"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:126",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:127",children:[e.jsx(b,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:128",className:"text-white font-bold",children:"Initial Investment (â‚¾)"}),e.jsx(N,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:129",type:"number",value:x||"",onChange:a=>R(Number(a.target.value)),placeholder:"Enter investment amount",className:"bg-white/10 text-white border-white/20 mt-2"})]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:138",children:[e.jsx(b,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:139",className:"text-white font-bold",children:"Total Returns (â‚¾)"}),e.jsx(N,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:140",type:"number",value:y||"",onChange:a=>M(Number(a.target.value)),placeholder:"Enter total returns",className:"bg-white/10 text-white border-white/20 mt-2"})]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:149",className:"bg-green-500/20 p-4 rounded-lg border border-green-400/30 mt-6",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:150",className:"text-sm text-white/80 mb-2 font-bold",children:"ROI Result"}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:151",className:"text-3xl font-bold text-green-300 mb-2",children:[u.roi.toFixed(2),"%"]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:154",className:"text-sm text-white/70 font-bold",children:["Profit: â‚¾",u.profit.toLocaleString()]})]})]})]}),e.jsxs(m,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:162",className:"p-6 bg-white/10 backdrop-blur-md border-white/20",children:[e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:163",className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:164",className:"bg-blue-500/20 p-3 rounded-lg",children:e.jsx(k,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:165",className:"w-6 h-6 text-blue-300"})}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:167",children:[e.jsx("h2",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:168",className:"text-xl font-bold text-white",children:"RevPAR Analysis"}),e.jsx("p",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:169",className:"text-sm text-white/70",children:"Revenue Per Available Room"})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:173",className:"mb-4",children:[e.jsx(b,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:174",className:"text-white font-bold mb-2 block",children:"Select Period"}),e.jsxs(I,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:175",value:p,onValueChange:S,children:[e.jsx(L,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:176",className:"bg-white/10 text-white border-white/20",children:e.jsx(D,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:177",placeholder:"All Months"})}),e.jsxs(O,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:179",children:[e.jsx(w,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:180",value:"all",children:"All Months"}),c?.map(a=>e.jsx(w,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:182",value:a.month,children:a.month},a.month))]})]})]}),g&&e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:191",className:"space-y-3",children:[e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:192",className:"bg-blue-500/20 p-4 rounded-lg border border-blue-400/30",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:193",className:"text-sm text-white/80 mb-1 font-bold",children:"RevPAR"}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:194",className:"text-3xl font-bold text-blue-300",children:["â‚¾",g.revpar.toLocaleString()]}),e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:197",className:"text-xs text-white/70 mt-1 font-bold",children:"Per Available Room Day"})]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:202",className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:203",className:"bg-white/10 p-3 rounded-lg",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:204",className:"text-xs text-white/70 font-bold",children:"Occupancy Rate"}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:205",className:"text-xl font-bold text-white",children:[g.occupancy,"%"]})]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:207",className:"bg-white/10 p-3 rounded-lg",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:208",className:"text-xs text-white/70 font-bold",children:"Average ADR"}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:209",className:"text-xl font-bold text-white",children:["â‚¾",g.adr]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:213",className:"bg-white/10 p-3 rounded-lg",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:214",className:"text-xs text-white/70 font-bold",children:"Total Revenue"}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:215",className:"text-xl font-bold text-white",children:["â‚¾",g.totalRevenue.toLocaleString()]})]})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:224",className:"grid grid-cols-2 gap-6",children:[e.jsxs(m,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:226",className:"p-6 bg-white/10 backdrop-blur-md border-white/20",children:[e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:227",className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:228",className:"bg-orange-500/20 p-3 rounded-lg",children:e.jsx(E,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:229",className:"w-6 h-6 text-orange-300"})}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:231",children:[e.jsx("h2",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:232",className:"text-xl font-bold text-white",children:"Revenue Forecasting"}),e.jsx("p",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:233",className:"text-sm text-white/70",children:"AI-Powered Predictions"})]})]}),o&&e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:238",className:"space-y-3",children:[e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:239",className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:240",className:"bg-white/10 p-3 rounded-lg",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:241",className:"text-xs text-white/70 font-bold",children:"Current Avg"}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:242",className:"text-lg font-bold text-white",children:["â‚¾",o.currentAvg.toLocaleString()]})]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:246",className:"bg-white/10 p-3 rounded-lg",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:247",className:"text-xs text-white/70 font-bold",children:"Last 3 Months"}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:248",className:"text-lg font-bold text-white",children:["â‚¾",o.last3MonthsAvg.toLocaleString()]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:254",className:"bg-orange-500/20 p-4 rounded-lg border border-orange-400/30",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:255",className:"text-sm text-white/80 mb-2 font-bold",children:"Growth Rate"}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:256",className:"text-2xl font-bold text-orange-300",children:[o.growthRate,"%"]}),e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:259",className:"text-xs text-white/70 mt-1 font-bold",children:parseFloat(o.growthRate)>0?"ðŸ“ˆ Positive Trend":"ðŸ“‰ Negative Trend"})]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:264",className:"bg-green-500/20 p-4 rounded-lg border border-green-400/30",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:265",className:"text-sm text-white/80 mb-2 font-bold",children:"Forecast Next Month"}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:266",className:"text-2xl font-bold text-green-300",children:["â‚¾",o.forecastNext.toLocaleString()]}),e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:269",className:"text-xs text-white/70 mt-1 font-bold",children:"Based on trend analysis"})]})]})]}),e.jsxs(m,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:278",className:"p-6 bg-white/10 backdrop-blur-md border-white/20",children:[e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:279",className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:280",className:"bg-purple-500/20 p-3 rounded-lg",children:e.jsx(C,{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:281",className:"w-6 h-6 text-purple-300"})}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:283",children:[e.jsx("h2",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:284",className:"text-xl font-bold text-white",children:"Profitability Metrics"}),e.jsx("p",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:285",className:"text-sm text-white/70",children:"Margin Analysis & Break-Even"})]})]}),i&&e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:290",className:"space-y-3",children:[e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:291",className:"bg-purple-500/20 p-4 rounded-lg border border-purple-400/30",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:292",className:"text-sm text-white/80 mb-2 font-bold",children:"Gross Profit Margin"}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:293",className:"text-3xl font-bold text-purple-300",children:[i.grossMargin,"%"]}),e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:296",className:"text-xs text-white/70 mt-1 font-bold",children:"Net Profit / Total Revenue"})]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:301",className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:302",className:"bg-white/10 p-3 rounded-lg",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:303",className:"text-xs text-white/70 font-bold",children:"Expense Ratio"}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:304",className:"text-xl font-bold text-white",children:[i.expenseRatio,"%"]})]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:306",className:"bg-white/10 p-3 rounded-lg",children:[e.jsx("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:307",className:"text-xs text-white/70 font-bold",children:"Break-Even"}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:308",className:"text-xl font-bold text-white",children:["â‚¾",i.breakEven.toLocaleString()]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:314",className:"bg-white/10 p-4 rounded-lg",children:[e.jsx("h3",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:315",className:"text-sm font-bold text-white mb-3",children:"Key Insights"}),e.jsxs("ul",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:316",className:"space-y-2 text-xs text-white/80",children:[e.jsxs("li",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:317",className:"flex items-start gap-2",children:[e.jsx("span",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:318",children:"âœ…"}),e.jsxs("span",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:319",children:["Profit margin of ",i.grossMargin,"% indicates ",parseFloat(i.grossMargin)>20?"healthy":"moderate"," profitability"]})]}),e.jsxs("li",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:321",className:"flex items-start gap-2",children:[e.jsx("span",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:322",children:"ðŸ’¡"}),e.jsxs("span",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:323",children:["Expense ratio at ",i.expenseRatio,"% - ",parseFloat(i.expenseRatio)<80?"well controlled":"needs optimization"]})]}),e.jsxs("li",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:325",className:"flex items-start gap-2",children:[e.jsx("span",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:326",children:"ðŸŽ¯"}),e.jsxs("span",{"data-loc":"client/src/pages/finance/FinanceAnalytics.tsx:327",children:["Break-even point: â‚¾",i.breakEven.toLocaleString()," monthly revenue required"]})]})]})]})]})]})]})]})}export{z as default};
