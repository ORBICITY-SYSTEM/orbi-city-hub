import{r as c,j as e,m as x,a4 as l}from"./react-vendor-BIDRRw8F.js";import{C as p,b as h,c as G,d as u,a as C,B as f}from"./index-BLcOQO7i.js";import{B as w}from"./badge-BATP3r_Y.js";import{u as j}from"./use-toast-2UsIGyGT.js";import{s as i}from"./client-C3pdvDkS.js";const I=()=>{const[n,r]=c.useState(!1),[a,b]=c.useState(!1);j();const m=()=>{const t="562547913079-73vc20ll40o2cat4d7gf9h7mje51hhob.apps.googleusercontent.com",s=`${window.location.origin}/google-callback`,o=["https://www.googleapis.com/auth/gmail.readonly","https://www.googleapis.com/auth/gmail.send","https://www.googleapis.com/auth/gmail.modify"].join(" "),g=`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:t,redirect_uri:s,response_type:"code",scope:o,access_type:"offline",prompt:"consent",login_hint:"orbi.apartments1@gmail.com"})}`;window.location.href=g},d=async()=>{try{const{data:{user:t}}=await i.auth.getUser();if(!t)return;const{data:s,error:o}=await i.from("google_tokens").select("*").eq("user_id",t.id).maybeSingle();if(o)throw o;s&&r(!0)}catch(t){console.error("Error checking connection:",t)}};return c.useEffect(()=>{d()},[]),e.jsxs(p,{"data-loc":"client/src/components/GoogleGmailConnect.tsx:64",className:"border-primary/20",children:[e.jsx(h,{"data-loc":"client/src/components/GoogleGmailConnect.tsx:65",children:e.jsxs("div",{"data-loc":"client/src/components/GoogleGmailConnect.tsx:66",className:"flex items-center gap-3",children:[e.jsx("div",{"data-loc":"client/src/components/GoogleGmailConnect.tsx:67",className:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-blue-600",children:e.jsx(x,{"data-loc":"client/src/components/GoogleGmailConnect.tsx:68",className:"h-5 w-5 text-white"})}),e.jsxs("div",{"data-loc":"client/src/components/GoogleGmailConnect.tsx:70",className:"flex-1",children:[e.jsxs("div",{"data-loc":"client/src/components/GoogleGmailConnect.tsx:71",className:"flex items-center gap-2",children:[e.jsx(G,{"data-loc":"client/src/components/GoogleGmailConnect.tsx:72",className:"text-xl",children:"Gmail Integration"}),n&&e.jsxs(w,{"data-loc":"client/src/components/GoogleGmailConnect.tsx:74",variant:"outline",className:"bg-success/10 text-success border-success/20",children:[e.jsx(l,{"data-loc":"client/src/components/GoogleGmailConnect.tsx:75",className:"h-3 w-3 mr-1"}),"Connected"]})]}),e.jsx(u,{"data-loc":"client/src/components/GoogleGmailConnect.tsx:80",children:"დააკავშირეთ Gmail API orbi.apartments1@gmail.com-ისთვის"})]})]})}),e.jsx(C,{"data-loc":"client/src/components/GoogleGmailConnect.tsx:86",children:n?e.jsxs("div",{"data-loc":"client/src/components/GoogleGmailConnect.tsx:96",className:"text-center text-sm text-muted-foreground",children:[e.jsx(l,{"data-loc":"client/src/components/GoogleGmailConnect.tsx:97",className:"h-8 w-8 text-success mx-auto mb-2"}),e.jsx("p",{"data-loc":"client/src/components/GoogleGmailConnect.tsx:98",children:"Gmail API დაკავშირებულია და მზადაა გამოსაყენებლად"}),e.jsx("p",{"data-loc":"client/src/components/GoogleGmailConnect.tsx:99",className:"text-xs mt-1",children:"orbi.apartments1@gmail.com"})]}):e.jsx(f,{"data-loc":"client/src/components/GoogleGmailConnect.tsx:88",onClick:m,disabled:a,className:"w-full",children:a?"დაკავშირება...":"Gmail-ის დაკავშირება"})})]})};export{I as G};
