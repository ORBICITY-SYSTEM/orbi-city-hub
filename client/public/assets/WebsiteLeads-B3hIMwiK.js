import{u as j,r as l,j as e,aj as W,G as m,U as f,aE as N,m as w,aA as v,n as b}from"./react-vendor-BIDRRw8F.js";import{B as p,C as h}from"./index-BLcOQO7i.js";import{u as y}from"./LanguageContext-DvTuhYl4.js";import{u as A}from"./use-toast-2UsIGyGT.js";import{T as C,a as I,b as n,c,d as E,e as a}from"./table-CASaqgev.js";import{B as u}from"./badge-BATP3r_Y.js";import{S}from"./scroll-area-C9ECY_El.js";import{s as P}from"./client-C3pdvDkS.js";import"./trpc-vendor-wm-eNDph.js";import"./vendor-INCMKllo.js";const z=()=>{j();const{t:s}=y(),{toast:d}=A(),[i,k]=l.useState([]),[o,g]=l.useState(!1);l.useEffect(()=>{x()},[]);const x=async()=>{g(!0);try{const{data:t,error:r}=await P.functions.invoke("fetch-website-leads");if(r)throw console.error("Error fetching leads:",r),r;t?.leads&&(k(t.leads),d({title:s("წარმატება","Success"),description:s(`ჩაიტვირთა ${t.leads.length} ლიდი`,`Loaded ${t.leads.length} leads`)}))}catch(t){console.error("Failed to fetch leads:",t),d({title:s("შეცდომა","Error"),description:s("ვერ მოხერხდა ლიდების ჩატვირთვა. გთხოვთ შეამოწმოთ API კონფიგურაცია.","Failed to load leads. Please check API configuration."),variant:"destructive"})}finally{g(!1)}},L=t=>{switch(t.toLowerCase()){case"new":return"bg-blue-500/10 text-blue-500 border-blue-500/20";case"contacted":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/20";case"confirmed":return"bg-green-500/10 text-green-500 border-green-500/20";case"cancelled":return"bg-red-500/10 text-red-500 border-red-500/20";default:return"bg-muted text-muted-foreground border-border"}};return e.jsxs("div",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:88",className:"min-h-screen bg-background",children:[e.jsx("header",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:89",className:"border-b border-border bg-card/50 backdrop-blur-sm sticky top-0 z-50",children:e.jsx("div",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:90",className:"container mx-auto px-6 py-4",children:e.jsxs("div",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:91",className:"flex items-center gap-4",children:[e.jsxs(p,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:92",variant:"ghost",size:"sm",onClick:()=>setLocation("/guest-communication"),children:[e.jsx(W,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:93",className:"h-4 w-4 mr-2"}),s("უკან","Back")]}),e.jsxs("div",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:96",className:"flex items-center gap-3",children:[e.jsx("div",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:97",className:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500",children:e.jsx(m,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:98",className:"h-6 w-6 text-white"})}),e.jsxs("div",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:100",children:[e.jsx("h1",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:101",className:"text-xl font-bold text-foreground",children:s("საიტის ლიდები","Website Leads")}),e.jsx("p",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:104",className:"text-xs text-muted-foreground",children:s("orbi-sea-luxury საიტიდან მიღებული დაჯავშნები","Bookings from orbi-sea-luxury website")})]})]})]})})}),e.jsxs("main",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:113",className:"container mx-auto px-6 py-8",children:[e.jsxs("div",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:114",className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:115",className:"flex items-center gap-3",children:[e.jsx(f,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:116",className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:117",children:[e.jsx("h2",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:118",className:"text-lg font-semibold text-foreground",children:s("ყველა ლიდი","All Leads")}),e.jsxs("p",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:121",className:"text-sm text-muted-foreground",children:[s("სულ","Total"),": ",i.length]})]})]}),e.jsxs(p,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:126",onClick:x,disabled:o,children:[e.jsx(N,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:127",className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),s("განახლება","Refresh")]})]}),e.jsx(h,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:132",className:"border-border",children:e.jsx(S,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:133",className:"h-[600px]",children:e.jsxs(C,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:134",children:[e.jsx(I,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:135",children:e.jsxs(n,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:136",children:[e.jsx(c,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:137",children:s("სახელი","Name")}),e.jsx(c,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:138",children:s("კონტაქტი","Contact")}),e.jsx(c,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:139",children:s("შემოსვლა","Check-in")}),e.jsx(c,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:140",children:s("გასვლა","Check-out")}),e.jsx(c,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:141",children:s("სტუმრები","Guests")}),e.jsx(c,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:142",children:s("წყარო","Source")}),e.jsx(c,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:143",children:s("სტატუსი","Status")}),e.jsx(c,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:144",children:s("თარიღი","Date")})]})}),e.jsx(E,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:147",children:i.length===0?e.jsx(n,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:149",children:e.jsx(a,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:150",colSpan:8,className:"text-center py-12",children:e.jsxs("div",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:151",className:"flex flex-col items-center gap-2",children:[e.jsx(m,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:152",className:"h-12 w-12 text-muted-foreground/50"}),e.jsx("p",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:153",className:"text-muted-foreground",children:s("მონაცემები არ არის. დააჭირეთ 'განახლება' ღილაკს.","No data available. Click 'Refresh' to load data.")})]})})}):i.map(t=>e.jsxs(n,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:164",children:[e.jsx(a,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:165",className:"font-medium",children:t.name}),e.jsx(a,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:166",children:e.jsxs("div",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:167",className:"flex flex-col gap-1",children:[e.jsxs("div",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:168",className:"flex items-center gap-1 text-sm",children:[e.jsx(w,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:169",className:"h-3 w-3"}),t.email]}),t.phone&&e.jsxs("div",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:173",className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(v,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:174",className:"h-3 w-3"}),t.phone]})]})}),e.jsx(a,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:180",children:e.jsxs("div",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:181",className:"flex items-center gap-1 text-sm",children:[e.jsx(b,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:182",className:"h-3 w-3"}),t.checkIn]})}),e.jsx(a,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:186",children:e.jsxs("div",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:187",className:"flex items-center gap-1 text-sm",children:[e.jsx(b,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:188",className:"h-3 w-3"}),t.checkOut]})}),e.jsx(a,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:192",children:t.guests}),e.jsx(a,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:193",children:e.jsx(u,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:194",variant:"outline",children:t.source})}),e.jsx(a,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:196",children:e.jsx(u,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:197",className:L(t.status),children:t.status})}),e.jsx(a,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:201",className:"text-sm text-muted-foreground",children:new Date(t.createdAt).toLocaleDateString("ka-GE")})]},t.id))})]})})}),e.jsxs(h,{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:212",className:"mt-6 p-6 bg-blue-500/5 border-blue-500/20",children:[e.jsx("h3",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:213",className:"text-sm font-semibold text-foreground mb-2",children:s("API ინტეგრაციის ინსტრუქცია","API Integration Instructions")}),e.jsx("p",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:216",className:"text-sm text-muted-foreground mb-3",children:s("Edge function დაკონფიგურირებულია. საჭიროა შემდეგი environment ცვლადების დამატება:","Edge function is configured. You need to add the following environment variables:")}),e.jsxs("ul",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:222",className:"text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[e.jsxs("li",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:223",children:[e.jsx("code",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:223",className:"bg-muted px-1.5 py-0.5 rounded",children:"ORBI_SEA_LUXURY_API_URL"})," - orbi-sea-luxury API endpoint"]}),e.jsxs("li",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:224",children:[e.jsx("code",{"data-loc":"client/src/pages/marketing/WebsiteLeads.tsx:224",className:"bg-muted px-1.5 py-0.5 rounded",children:"ORBI_SEA_LUXURY_API_KEY"})," - (არჩევითი) API authentication key"]})]})]})]})]})};export{z as default};
